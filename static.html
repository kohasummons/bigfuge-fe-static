<!DOCTYPE html><html><head> <meta charset='UTF-8'> <title>IoT Centrifuge Control</title> <style> body { font-family: Arial, sans-serif; } .container { max-width: 600px; margin: 0 auto; padding: 20px; } h1 { text-align: center; } .control-panel { text-align: center; margin-top: 20px; } .button { padding: 10px 20px; font-size: 18px; cursor: pointer; } .status { text-align: center; margin-top: 20px; } .timer { text-align: center; margin-top: 20px; font-size: 24px; } .speed-display { text-align: center; margin-top: 20px; font-size: 20px; } .options { text-align: center; margin-top: 20px; } .option-label { font-size: 16px; } .option-input { padding: 5px; font-size: 16px; } .select-dropdown { width: 100px; padding: 5px; font-size: 16px; } .slider { width: 80%; margin: 0 auto; } </style></head><body> <div class='container'> <h1>IoT Centrifuge Control</h1> <div class='control-panel'> <button class='button' id='startButton'>Start</button> <button class='button' id='stopButton'>Stop</button> </div> <div class='status'> <h2>Status: <span id='statusText'>Idle</span></h2> </div> <div class='timer'> <h2>Time Remaining: <span id='timer'>0:00</span></h2> </div> <div class='speed-display'> <h2>Centrifuge Speed: <span id='rand2'>1500 RPM</span></h2> </div> <div class='speed-display'> <h2>Battery Volatage: <span id='rand1'>0 V</span></h2> </div> <div class='options'> <h3>Options:</h3> <label class='option-label'>Speed (RPM):</label> <div class='slider'> <input type='range' class='option-input' id='speedInput' min='1000' max='2000' step='100' value='1500'> </div> <br> <label class='option-label'>Time:</label> <select class='select-dropdown' id='timeSelect'> <option value='60'>1 minutes</option> <option value='120'>2 minutes</option> <option value='180'>3 minutes</option> <option value='240'>4 minutes</option> <option value='300'>5 minutes</option> <option value='360'>6 minutes</option> <option value='420'>7 minutes</option> <option value='480'>8 minutes</option> <option value='540'>9 minutes</option> <option value='600'>10 minutes</option> <option value='660'>11 minutes</option> <option value='720'>12 minutes</option> <option value='780'>13 minutes</option> <option value='820'>14 minutes</option> <option value='900'>15 minutes</option> <option value='1200'>20 minutes</option> </select> </div> </div> <script> let countdownInterval; let remainingTime = 0; let centrifugeSpeed = 1500; let centrifugeSpeed1 = 1500; var Socket; function init() { Socket = new WebSocket('ws://' + window.location.hostname + ':81/'); Socket.onmessage = function(event) { processCommand(event); }; } function processCommand(event) { var obj = JSON.parse(event.data); document.getElementById('rand1').innerHTML = obj.rand1; document.getElementById('rand2').innerHTML = obj.rand2; console.log(obj.rand1); console.log(obj.rand2); } function toggleOptionsVisibility(isVisible) { const optionsElements = document.querySelectorAll('.option-input, .select-dropdown'); optionsElements.forEach(element => { element.disabled = !isVisible; }); } document.getElementById('speedInput').addEventListener('input', function() { centrifugeSpeed1 = parseFloat(this.value); centrifugeSpeed1 = ((centrifugeSpeed1/2000)*22800).toFixed(0); document.getElementById('rand2').textContent = `${centrifugeSpeed1} RPM`; }); document.getElementById('startButton').addEventListener('click', function() { const selectedSpeed = parseInt(document.getElementById('speedInput').value); centrifugeSpeed = selectedSpeed; const selectedTime = parseInt(document.getElementById('timeSelect').value); remainingTime = selectedTime; document.getElementById('statusText').textContent = 'Running'; toggleOptionsVisibility(false); countdownInterval = setInterval(updateTimer, 1000); var msg = { brand: selectedSpeed, type: selectedTime, color: 'Start' }; Socket.send(JSON.stringify(msg)); }); document.getElementById('stopButton').addEventListener('click', function() { document.getElementById('statusText').textContent = 'Idle'; toggleOptionsVisibility(true); clearInterval(countdownInterval); remainingTime = 0; updateTimer(); centrifugeSpeed = 0; updateSpeed(); var msg = { brand: 1000, type: 0, color: 'Stop' }; Socket.send(JSON.stringify(msg)); }); function updateTimer() { const minutes = Math.floor(remainingTime / 60); const seconds = remainingTime % 60; const timerDisplay = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`; document.getElementById('timer').textContent = timerDisplay; if (remainingTime <= 0) { clearInterval(countdownInterval); document.getElementById('statusText').textContent = 'Idle'; toggleOptionsVisibility(true); } else { remainingTime--; } } function updateSpeed() { document.getElementById('rand2').textContent = `${centrifugeSpeed} RPM`; } window.onload = function(event) { init(); } </script></body></html>";
